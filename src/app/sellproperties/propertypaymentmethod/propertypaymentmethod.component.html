<div *ngIf="loading1==true" class="overlay-gif">
    <img src="assets/images/login-logo.png" alt="">
    <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>
</div>
<app-topnav></app-topnav>

<div class="container">
    <div class="row">
        <div class="web-form-prop">
            <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12 p-side">
                <app-sell-sidemenu></app-sell-sidemenu>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-6 col-xs-12 pr-main">

                <section class="payment-method-div">
                    <div class="step-2">
                        <h1>Select a Payment Method</h1>

                        <div class="select-payment">
                            <div class="payment-title">
                                <div class="pay-lft">
                                    <h2>Select a Payment Method</h2>
                                </div>
                                <div class="pay-rgt">
                                    <h2>Expires</h2>
                                </div>
                            </div>

                            <div class="panel-group" role="tablist" aria-multiselectable="true">

                                <div *ngFor="let wallet of userwalletinfo; let i = index">
                                    <div class="panel panel-primary">
                                        <div class="panel-heading" role="tab" id="headingOne_{{i}}">
                                            <h4 class="panel-title">


                                                <div *ngIf="wallet.CardType =='MasterCard'; else visacard">
                                                    <span class="card-txt">
                                                        <img src="assets/images/master1.png" /> MasterCard ending in {{ wallet.LastDigits | slice:12:16}}
                                                    </span>
                                                </div>

                                                <ng-template #visacard>
                                                    <div *ngIf="wallet.CardType =='Visa'; else discover">
                                                        <span class="card-txt">
                                                            <img src="assets/images/visa1.png" /> Visa ending in {{ wallet.LastDigits }}</span>
                                                    </div>

                                                </ng-template>
                                                <ng-template #discover>
                                                    <div *ngIf="wallet.CardType =='Discover'; else amex">
                                                        <span class="card-txt">
                                                            <img src="assets/images/discover-card.png" /> Discover ending in {{ wallet.LastDigits }}</span>
                                                    </div>

                                                </ng-template>
                                                <ng-template #amex>
                                                    <div *ngIf="wallet.CardType =='Amex'; else jcb">

                                                        <span class="card-txt">
                                                            <img src="assets/images/master1-card.png" /> Amex ending in {{ wallet.LastDigits }}</span>
                                                    </div>
                                                </ng-template>
                                                <ng-template #jcb>

                                                    <span class="card-txt">
                                                        <img src="assets/images/master1-card.png" /> Jcb ending in {{ wallet.LastDigits}}</span>

                                                </ng-template>
                                                <span class="year-txt">{{ wallet.ExpiryMonth +"/"+ wallet.ExpiryYear}}</span>
                                                            <span *ngIf="wallet.IsPrimary"  class="text-blue">Primary</span>
                                                            <span *ngIf="!wallet.IsPrimary"  class="text-plain"><br><br></span>
                                                <span  (click)="deleteCard(wallet.id)" class="text-red">Delete</span>
                                                <a role="button" data-toggle="collapse" data-parent="#accordion_1" href="#collapseOne_{{i}}" aria-expanded="false" aria-controls="collapseOne_1">
                                                </a>
                                            </h4>
                                        </div>
                                  
                                    </div>

                                </div>
                            </div>
                            <!-- <div class="panel-group" id="accordion_1" role="tablist" aria-multiselectable="true">
                                        <div class="panel panel-primary">
                                            <div class="panel-heading" role="tab" id="headingOne_1">
                                                <h4 class="panel-title">
                                                    <a role="button" data-toggle="collapse" data-parent="#accordion_1" href="#collapseOne_1" aria-expanded="false" aria-controls="collapseOne_1">
                                                        <span class="card-txt">
                                                            <img src="assets/images/visa1.png" /> Visa ending in 3688</span>
                                                        <span>07 / 2020</span>
                                                    </a>
                                                </h4>
                                            </div>
                                            <div id="collapseOne_1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne_1">
                                                <div class="panel-body">
                                                    <p>Card Details</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="panel panel-primary">
                                            <div class="panel-heading" role="tab" id="headingTwo_1">
                                                <h4 class="panel-title">
                                                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion_1" href="#collapseTwo_1" aria-expanded="false"
                                                        aria-controls="collapseTwo_1">
                                                        <span class="card-txt">
                                                            <img src="assets/images/visa1.png" /> Visa ending in 5676</span>
                                                        <span class="red-expire">Expired 09 / 2017</span>
                                                    </a>
                                                </h4>
                                            </div>
                                            <div id="collapseTwo_1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo_1">
                                                <div class="panel-body">
                                                    <p>Card Details</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="panel panel-primary">
                                            <div class="panel-heading" role="tab" id="headingThree_1">
                                                <h4 class="panel-title">
                                                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion_1" href="#collapseThree_1" aria-expanded="false"
                                                        aria-controls="collapseThree_1">
                                                        <span class="card-txt">
                                                            <img src="assets/images/master1.png" /> MasterCard ending in 8740</span>
                                                        <span>06 / 2022</span>
                                                    </a>
                                                </h4>
                                            </div>
                                            <div id="collapseThree_1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree_1">
                                                <div class="panel-body">
                                                    <p>Card Details</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="panel panel-primary">
                                            <div class="panel-heading" role="tab" id="headingFour_1">
                                                <h4 class="panel-title">
                                                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion_1" href="#collapseFour_1" aria-expanded="false"
                                                        aria-controls="collapseFour_1">
                                                        <span class="card-txt">
                                                            <img src="assets/images/master1.png" /> MasterCard ending in 2059</span>
                                                        <span>09 / 2021</span>
                                                    </a>
                                                </h4>
                                            </div>
                                            <div id="collapseFour_1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour_1">
                                                <div class="panel-body">
                                                    <p>Card Details</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div> -->
                        </div>

                        <h3>Add a New Payment Method</h3>
                        <ul class="card-list">
                            <li>
                                <div class="card-lft">
                                    <h2>Credit or Debit Cards</h2>
                                    <p>PROPTECS accepts most major & debit cards
                                        <a data-toggle="modal" data-target="#addCardModal">Add a Card</a>
                                    </p>

                                    <!-- Modal -->
                                    <div id="addCardModal" class="modal fade" role="dialog">
                                        <!-- style="display: block;margin-top: 10%;" -->
                                        <div class="modal-dialog" style="display: block;padding-left: 17px;margin-top: 6%;">
                                            <!-- Modal content-->
                                            <div class="modal-content">
                                                <form #modalForm="ngForm">
                                                    <div class="modal-body">
                                                        <div class="col-lg-12 white-bg mrg-btm-30 m-t-20">
                                                            <h2 class="main-tlt additional-details-list">Add a new card</h2>
                                                            <div style="float:right"><input type="checkbox" id="basic_checkbox_2" [(ngModel)]="PrimaryCard" [ngModelOptions]="{standalone: true}"  class="filled-in">
                                                                <label for="basic_checkbox_2">Make Primary</label></div>
                                                            <div class="alert alert-success wow fadeInLeft delay-03s" role="alert" *ngIf="hasMessage">
                                                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                                    <span aria-hidden="true">×</span>
                                                                </button>
                                                                {{displayMessage}}
                                                            </div>
                                                            <div class="alert alert-danger wow fadeInLeft delay-03s" role="alert" *ngIf="hasErrorMesage">
                                                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                                    <span aria-hidden="true">×</span>
                                                                </button>
                                                                {{displayMessage}}
                                                            </div>

                                                            <div class="row m-b-20">
                                                                <div class="col-lg-12" [ngClass]="{ 'has-error': cardnumberentered && !validCard }">
                                                                    <label for="card-number">Card Number
                                                                        <span class="required">*</span>
                                                                    </label>
                                                                    <input type="text" class="form-control card-input cc-{{type}}" name="num" [(ngModel)]="num" (keypress)="numberOnly($event)" (input)="handleChange()"  required>
                                                                    <div *ngIf="cardnumberentered && !validCard" class="help-block">Invalid Card.</div>
                                                                </div>
                                                            </div>
                                                            <div class="row m-b-20">
                                                                <div class="col-lg-12">
                                                                    <label for="card-number">Account Name
                                                                        <span class="required">*</span>
                                                                    </label>
                                                                    <input type="text" class="form-control" name="AccountName" [(ngModel)]="wallet.AccountName" #AccountName="ngModel" required>
                                                                </div>
                                                            </div>
                                                            <div class="row m-b-20">
                                                                <div class="col-xs-4">
                                                                    <label for="card-number">Exp. Month
                                                                        <span class="required">*</span>
                                                                    </label>
                                                                    <ng-select [items]="Months" 
                                                                    bindLabel="Months" placeholder="Select Month" 
                                                                    [(ngModel)]="wallet.ExpMonth" #ExpMonth="ngModel" [ngModelOptions]="{standalone: true}">
                                                                  </ng-select>
                                                                    <!-- <select class="form-control" name="ExpMonth" [(ngModel)]="wallet.ExpMonth" #ExpMonth="ngModel" required>
                                                                        <option value="01">01</option>
                                                                        <option value="02">02</option>
                                                                        <option value="03">03</option>
                                                                        <option value="04">04</option>
                                                                        <option value="05">05</option>
                                                                        <option value="06">06</option>
                                                                        <option value="07">07</option>
                                                                        <option value="08">08</option>
                                                                        <option value="09">09</option>
                                                                        <option value="10">10</option>
                                                                        <option value="11">11</option>
                                                                        <option value="12">12</option>
                                                                    </select> -->
                                                                </div>
                                                                <div class="col-xs-4">
                                                                    <label for="card-number">Exp. Year
                                                                        <span class="required">*</span>
                                                                    </label>
                                                                    <ng-select [items]="Years" 
                                                                    bindLabel="Years" placeholder="Select Year" 
                                                                    [(ngModel)]="wallet.ExpYear" #ExpYear="ngModel" [ngModelOptions]="{standalone: true}">
                                                                  </ng-select>
                                                                    <!-- <select class="form-control" name="ExpYear" [(ngModel)]="wallet.ExpYear" #ExpYear="ngModel" required>
                                                                        <option value="2018">2018</option>
                                                                        <option value="2019">2019</option>
                                                                        <option value="2020">2020</option>
                                                                        <option value="2021">2021</option>
                                                                        <option value="2022">2022</option>
                                                                        <option value="2023">2023</option>
                                                                        <option value="2024">2024</option>
                                                                        <option value="2025">2025</option>
                                                                        <option value="2026">2026</option>
                                                                        <option value="2027">2027</option>
                                                                        <option value="2028">2028</option>
                                                                        <option value="2029">2029</option>
                                                                        <option value="2030">2030</option>
                                                                        <option value="2031">2031</option>
                                                                        <option value="2032">2032</option>
                                                                        <option value="2033">2033</option>
                                                                    </select> -->
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                    <div class="modal-footer">
                                                        <div class="col-lg-12">

                                                            <button type="button" class="btn bg-yellow waves-effect" data-dismiss="modal" (click)="dismissmodal()">Cancel</button>
                                                            <button type="button" class="btn bg-blue waves-effect" [disabled]="!modalForm.valid || (cardnumberentered && !validCard)"
                                                                (click)="addcard()">Continue</button>
                                                            <img *ngIf="loading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="
                                                            />
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>

                                        </div>
                                    </div>


                                </div>
                                <div class="card-rgt">
                                    <a href="javascript:void(0);">
                                        <img src="assets/images/visa-card.png" />
                                    </a>
                                    <a href="javascript:void(0);">
                                        <img src="assets/images/master-card.png" />
                                    </a>
                                    <a href="javascript:void(0);">
                                        <img src="assets/images/blue-card.png" />
                                    </a>
                                    <a href="javascript:void(0);">
                                        <img src="assets/images/apple-card.png" />
                                    </a>
                                    <a href="javascript:void(0);">
                                        <img src="assets/images/american-card.png" />
                                    </a>
                                    <a href="javascript:void(0);">
                                        <img src="assets/images/discover-card.png" />
                                    </a>
                                </div>
                            </li>
                            <li>
                                <div class="card-lft">
                                    <h2>Bank Accounts</h2>
                                    <p>Use your US-based banking or checking account. Learn more
                                        <a href="javascript:void(0);">Add a Personal Checking Account
                                        </a>
                                    </p>
                                </div>
                            </li>
                        </ul>

                    </div>
                </section>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="row clearfix">

                        <div class="col-sm-4 pull-right">
                            <div class="form-group btn-field">
                                <button (click)="confirmpayment();" ng-disabled="userwalletinfo.length == 0" type="button" class="btn bg-amber m-t-15 waves-effect"> Continue</button>
                            </div>
                        </div>
                        <div class="col-sm-5">

                        </div>

                    </div>
                </div>


            </div>